<div data-af-loading="!fr.$resolved || (!facility.organization.$resolved && !facility.organization.name) || !facility.province.$resolved || loading.disciplines || loading.sectors">
  <hr>
  <!-- Record information. -->
  <div>
    <p class="text-muted">Record Information</p>
    
    <div class="row">
      <!-- Facility state. -->
      <div class="col-sm-3" data-ng-class="{ 'text-right': _window.innerWidth >= _bootstrap.grid.breakpoints.sm }">
        <label>State</label>
      </div>
    
      <div class="col-sm-9">
        <p>
          <b>
            <!-- Pending. -->
            <span class="text-info" data-ng-show="facility.state == 'PENDING_APPROVAL'">PENDING APPROVAL</span>
            <span class="text-info" data-ng-show="facility.state == 'PENDING_EDIT_APPROVAL'">PENDING EDIT APPROVAL</span>
            
            <!-- Published and current. -->
            <span class="text-success" data-ng-show="(facility.state == 'PUBLISHED' || facility.state == 'PUBLISHED_EDIT') && fr.publishedFacility.id && fr.facility.id">
              CURRENT PUBLISHED REVISION
            </span>
            
            <!-- Published but old. -->
            <span class="text-warning" data-ng-show="(facility.state == 'PUBLISHED' || facility.state == 'PUBLISHED_EDIT') && !fr.publishedFacility.id && fr.facility.id">
              PREVIOUS PUBLISHED REVISION
            </span>
            
            <!-- Rejected. -->
            <span class="text-danger" data-ng-show="facility.state == 'REJECTED'">
              REJECTED
            </span>
            
            <!-- Rejected edit. -->
            <span class="text-danger" data-ng-show="facility.state == 'REJECTED_EDIT'">
              REJECTED EDIT
            </span>
            
            <!-- Deleted. -->
            <span class="text-danger" data-ng-show="(facility.state != 'PENDING' || facility.state != 'PENDING_APPROVAL') && !fr.facility.id">
              DELETED
            </span>
          </b>
        </p>
        
        <!-- Current revision anchor (only shown if not already viewing current revision). -->
        <p>
          <span data-ng-show="!fr.publishedFacility.id && fr.facility.id">
            <a data-ui-sref="admin.facilities.show({ facilityRepositoryId: fr.facility.facilityRepositoryId })">Current published revision</a>
          </span>
        </p>
        
        <!-- Revision history anchor. -->
        <p>
          <span data-ng-show="fr.facilityId">
            <a data-ui-sref="admin.facilities.history.index({ facilityId: fr.facilityId })">Revision history</a>
          </span>
        </p>
      </div>
    </div>
    
    <!-- Search visiblity -->
    <div class="row">
      <div class="col-sm-3" data-ng-class="{ 'text-right': _window.innerWidth >= _bootstrap.grid.breakpoints.sm }">
        <label>Search visibility</label>
      </div>
    
      <div class="col-sm-9">
        <span data-ng-show="(facility.state == 'PUBLISHED' || facility.state == 'PUBLISHED_EDIT') && facility.isPublic">Public</span>
        <span data-ng-show="(facility.state == 'PUBLISHED' || facility.state == 'PUBLISHED_EDIT') && !facility.isPublic">Private</span>
        <span class="label label-default" data-ng-show="facility.state != 'PUBLISHED' && facility.state != 'PUBLISHED_EDIT'">N/A</span>        
      </div>
    </div>
    
    <!-- Reviewed by. -->
    <div class="row">
      <div class="col-sm-3" data-ng-class="{ 'text-right': _window.innerWidth >= _bootstrap.grid.breakpoints.sm }">
        <label>Reviewed by</label>
      </div>
    
      <div class="col-sm-9">
        {{ fr.reviewer.firstName }} {{ fr.reviewer.lastName }}
        <span class="label label-default" data-ng-show="!fr.reviewer.firstName">N/A</span>        
      </div>
    </div>
    
    <!-- Reviewer message. -->
    <div class="row">
      <div class="col-sm-3" data-ng-class="{ 'text-right': _window.innerWidth >= _bootstrap.grid.breakpoints.sm }">
        <label>Reviewer message</label>
      </div>
    
      <div class="col-sm-9">
        {{ fr.reviewerMessage }}
        <span class="label label-default" data-ng-show="!fr.reviewer.firstName">N/A</span>
        <span class="label label-default" data-ng-show="fr.reviewer.firstName && !fr.reviewerMessage">No message was provided</span>        
      </div>
    </div>
    
    <!-- Date submitted. -->
    <div class="row">
      <div class="col-sm-3" data-ng-class="{ 'text-right': _window.innerWidth >= _bootstrap.grid.breakpoints.sm }">
        <label>Date submitted</label>
      </div>
    
      <div class="col-sm-9">
        {{ fr.dateSubmitted | afStrToDate | date:'medium' }}
      </div>
    </div>
    
    <!-- Date reviewed. -->
    <div class="row">
      <div class="col-sm-3" data-ng-class="{ 'text-right': _window.innerWidth >= _bootstrap.grid.breakpoints.sm }">
        <label>Date reviewed</label>
      </div>
    
      <div class="col-sm-9">
        <span data-ng-if="fr.reviewer.firstName">{{ fr.dateReviewed | afStrToDate | date:'medium' }}</span>
        <span class="label label-default" data-ng-show="!fr.reviewer.firstName">N/A</span>
      </div>
  </div> 
  <br>
  <br>
  
  <!-- Facility information -->
  <div data-af-facility="all" data-af-facility-model="facility" data-af-facility-is-preview="true"></div>
  
  <!-- Reviewer message textbox -->
  <div style="padding: 3px;" data-ng-show="facility.state == 'PENDING_APPROVAL' || facility.state == 'PENDING_EDIT_APPROVAL'">
    <hr>
    <br>
    
    <div class="row">
      <div class="col-sm-3" data-ng-class="{ 'text-right': _window.innerWidth >= _bootstrap.grid.breakpoints.sm }">
        <label>Reviewer message</label>
        <p>This is optional. It will be included in the email to the primary contact</p>
      </div>
    
      <div class="col-sm-7">
        <div class="form-group">
          <textarea class="form-control" id="reviewerMessage" rows="7" data-ng-model="fr.reviewerMessage"></textarea>
        </div>
      </div>
    </div>
    
    <!-- Administration buttons -->
    <p>
      <button type="button" class="btn btn-default" data-ng-click="approve();" data-ng-show="facility.state == 'PENDING_APPROVAL'" data-af-loading-btn="loading.approve" data-ng-disabled="loading.approve || loading.reject || loading.approveEdit || loading.rejectEdit">Approve <span class="glyphicon glyphicon-ok"></span></button>
      <button type="button" class="btn btn-default" data-ng-click="reject();" data-ng-show="facility.state == 'PENDING_APPROVAL'" data-af-loading-btn="loading.reject" data-ng-disabled="loading.approve || loading.reject || loading.approveEdit || loading.rejectEdit">Reject <span class="glyphicon glyphicon-remove"></span></button>
      <button type="button" class="btn btn-default" data-ng-click="approveEdit();" data-ng-show="facility.state == 'PENDING_EDIT_APPROVAL'" data-af-loading-btn="loading.approveEdit" data-ng-disabled="loading.approve || loading.reject || loading.approveEdit || loading.rejectEdit">Approve edit <span class="glyphicon glyphicon-ok"></span></button>
      <button type="button" class="btn btn-default" data-ng-click="rejectEdit();" data-ng-show="facility.state == 'PENDING_EDIT_APPROVAL'" data-af-loading-btn="loading.rejectEdit" data-ng-disabled="loading.approve || loading.reject || loading.approveEdit || loading.rejectEdit">Reject edit <span class="glyphicon glyphicon-remove"></span></button>
    </p>
  </div>
</div>
